---
title:  "Arch LInux 설치 후기(기본 셋팅 편)"
excerpt: "install_linux"
header:

categories:
  - C/C++
tags:
  - C/C++
---

 우분투를 쓰고 있었지만 뭔가 허전함이 느껴졌고 나는 아치리눅스를 쓰기로 하였다.  
 결과적으로 설치가 잘됬고 아쉬운 한가지가 있다면 내가 가지고 있는 24인치의 dell 모니터가 피벗이 안된다는 점이다.  
 그래서 그냥 가로로 두고 쓰고있다. 멀티가 되는게 어디랴.  
   
 아치리눅스는 오로지 명령어 기반으로 설치를 하는 프로그램이다.  

 그래서 처음부터 셋팅을 잘해둬야 중간에 꼬이지 않는다.  

 내가 겪은 시행착오를 적어두고자하여서 포스팅을 하였다.  

 1. 설치 usb 포맷시 반드시 파티션 방식을 GPT방식으로 해야하고 포맷 옵션을 FAT32로 해야한다.  
 
 그렇지 않으면 설치 과정이 제대로 되지 않는다.  
 준비물 usb를 꽂고 부팅한다면 강아지인지 소인지 구별이 안가는 동물이 반겨준다.  
   
 그때 확인해야할 명령어는  

 ```c
 $ ls /sys/firmware/efi/efivars
 ```  
 를 입력하여준다.

 그럼 여러가지 내용이 나온다면 정상적으로 설치할 준비가 된 것이라고 볼 수 있다.  
 여기서 막힌다면 다시 설치 준비를 해와야할 것이다.  
 포맷 대충했다가 다시했다.  
   
 와이파이를 잡아주는데 와이파이로 잡아도좋고 유선 렌선으로 잡아줘도 좋다.  
 나 같은 경우에는 와이파이를 명령어로 잡아준 다음에 재부팅한 후에는 데스크탑 환경에서 와이파이를 다시 잡아줬다.  

 와이파이 잡는 과정은 하기에.

 ```c
 $ iwctl
 [iwd]$ device list
 [iwd]$ station wlan0 scan
 [iwd]$ station wlan0 get-networks

 [iwd]$ station wlan0 connect SSID  
 $ input the passward  
 [iwd]$ exit

 $ ping -c 3 www.google.com
 ```  
 반드시 마지막에 ping으로 인터넷 연결을 확인해봐야한다.  
 만약 잡히지 않는다면 다시 설치를 하거나, 그냥 유선으로 연결하면된다.  

 파티션 분할을 하는 과정이다.  
 윈도우에서 포맷을 할때는 cmd창을 띄워서 diskpart를 쳐서 list disk를 입력하여서 설치해줄 파티션 설치하여 포맷을 하면 됬지만 이건 리눅스다.  
 방식이 약간 다르다.  

 ```c
 $ fdisk -l
 $ gdisk /dev/sda1
 Command (? for help) : o
 y
 ```  

 ```c
 n
 (enter)
 (enter)
 +512M
 ef00

 n
 (enter)
 (enter)
 +8G
 8200 (linux swap)

 n
 (enter)
 (enter)
 +85G
 (enter)

 n
 (enter)
 (enter)
 (enter)
 (enter)

 p (파티션 구성 확인)
 w (디스크에 작성)
 y
 ```  

 ```c
 $ mkfs.vfat -F32 /dev/sda1
 $ mkfs.ext4 /dev/sda3
 $ mkfs.ext4 /dev/sda4
 $ mkswap /dev/sda2
 $ swapon !$
 ```  

 파티션 마운트 (여기서는 리눅스를 설치할 디스크를 마운트하는 것이므로 외장하드나 다른 하드는 설치완료후 따로 mount를 해줘야 했다.)  
 ```c
 $ mount /dev/sda3 /mnt
 $ mkdir /mnt/boot
 $ mkdir /mnt/home
 $ mount /dev/sda1 /mnt/boot
 $ mount /dev/sda4 /mnt/home
 ```  

 **base package install**  
```c
$ pacstrap /mnt base linux linux-firmware nano networkmanager base-devel man-db man-pages texinfo
$ genfstab -U /mnt >> /mnt/etc/fstab
# arch-chroot /mnt
```  

**여기서는 bash쉘 공간입니다.**  
```c
$ ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime
$ hwclock --systohc
$ passwd
$ nano /etc/locale.gen 
(en_US.UTF-8 UTF-8 앞의 주석을 지워주면 된다. 한글을 하면 꼬일까봐 영어로 깔았다.)  

$ locale-gen
$ echo LANG=en_US.UTF-8 > /etc/locale.conf

$ echo HOSTNAME(쓰고싶음 컴퓨터 이름 작성) > /etc/hostname 
$ useradd -m -g users -G wheel -s /bin/bash HOSTNAME
$ passwd HOSTNAME
```  

**bootctl install**  
```c
$ bootctl install
$ nano /boot/loader/loader.conf
```  

**loader.conf file write**  
```c
default arch.conf
timeout 0
console-mode max
editor no
```  

**bootloader setting**  
```c
$ pacman -Syu intel-ucode (intel)
$ pacman -Syu amd-ucode (amd)
```  

**/boot/loader/entries/arch.conf**
```c
title Arch Linux
linux /vmlinuz-linux
initrd /intel-ucode.img (intel user)
initrd /amd-ucode.img (amd user)
initrd /initramfs-linux.img
options root=/dev/sda3 rw
```  

```c
$ systemctl enable NetworkManager.service
$ exit

$ umount -R /mnt
$ reboot
```  
 
이제 기본적인 셋팅은 모두 끝난 것이고 데스크탑 환경을 설치할 차례이다.  

```c
$ sudo pacman -Syu xorg-server gnome
$ sudo systemctl enable gdm
$ reboot
```

